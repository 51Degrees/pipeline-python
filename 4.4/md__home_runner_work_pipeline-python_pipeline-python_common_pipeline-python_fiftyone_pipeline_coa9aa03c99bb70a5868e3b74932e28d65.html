<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Pipeline Python: Purpose</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png"/></a>
  <span class="c-tagline">51Degrees Pipeline Python
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">51Degrees Pipeline for Python</div>
  </div>
  <div id="main-nav"></div>
     <div class="g-search">
    <div class="c-search is-openable">
    <form class="c-search__form">
      <div id="MSearchBox" class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img id="MSearchSelect" src="icon-search.svg" class="b-icon" alt="Search" 
                 onmouseover="return searchBox.OnSearchSelectShow()"
                 onmouseout="return searchBox.OnSearchSelectHide()"/>
        <input type="text" id="MSearchField" autocomplete="off" class="c-search__input" id="inputSearch" placeholder="Type a class, namespace etc." aria-label="Search"
                 onfocus="searchBox.OnSearchFieldFocus(true)" 
                 onblur="searchBox.OnSearchFieldFocus(false)" 
                 onkeyup="searchBox.OnSearchFieldChange(event)">
         <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
      </div>
    </form>
  </div>
</div>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_pipeline-python_pipeline-python_common_pipeline-python_fiftyone_pipeline_coa9aa03c99bb70a5868e3b74932e28d65.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="md__home_runner_work_pipeline-python_pipeline-python_common_pipeline-python_fiftyone_pipeline_coa9aa03c99bb70a5868e3b74932e28d65.html">Purpose</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">Purpose </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><p>Store shared (mustache) templates to be used by the implementation of <code>JavaScriptBuilderElement</code> and other components across the languages.</p>
<h2>Background</h2>
<p>The <a href="https://github.com/51Degrees/specifications">language-independent specification</a> describes how JavaScriptBuilderElement is used here. The mechanics is: javascript file is requested from the server (on-premise web integration) and is created from this mustache template by the JavaScriptBuilderElement. It then collects more evidence, sends it to the server and upon response calls a callback function providing the client with more precise device data.</p>
<h2>Cookies -&gt; Session storage Transformation</h2>
<p>The processJsProperties function in javascript template has a section that uses regex to search the injected JavaScript for any commands that set cookie values to the browser's document object. It then transforms this command so that it sets session storage values instead. This format should be accounted for when writing JavaScript properties.</p>
<hr/>
<h3>Cookie Transformation regular expression rules</h3>
<h4>Valid Format for Cookie Statements:</h4>
<ul>
<li><b>Cookie Assignment</b>: The expression should start with <code>document.cookie =</code></li>
<li><b>Spaces</b>: Spaces around the first <code>=</code> sign are optional</li>
<li><b>Cookie Name</b>: The name of the cookie should only contain alphanumeric characters, underscores, and must not have spaces</li>
<li><b>Assignment with Double Quotes</b>: The cookie value assignment can use double quotes, and the value should be set programmatically by concatenating a string with a variable or expression</li>
<li><b>Assignment with Backticks</b>: The cookie value assignment can use backticks for template literals, and the value can be set programmatically using expressions inside <code>${}</code></li>
<li><b>No Direct Value Assignment</b>: Directly setting a value within the string is not allowed; values must be set programmatically</li>
</ul>
<p>#### Regular Expression: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">/document\.cookie\s*=\s*((&quot;([A-Za-z0-9_&quot;\s\+]+)\s*=\s*&quot;\s*\+\s*([^\s};]+))|(`([A-Za-z0-9_]+)\s*=\s*\$\{([^}]+)\}`))/g</div></div><p>#### Valid Examples: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">document.cookie=&quot;51D_PropertyName=&quot;+&quot;True&quot;; // No spaces around the equals and/or plus sign</div><div class="c-code__line">document.cookie = &quot;51D_PropertyName=&quot; + &quot;True&quot;; // Spaces around the equals sign</div><div class="c-code__line">document.cookie = &quot;51D_PropertyName=&quot; + screen.height; // Assigning a value using a variable</div><div class="c-code__line">document.cookie=&quot;51D_PropertyName=&quot;+screen.height; // No spaces, variable assignment</div><div class="c-code__line">document.cookie=`51D_PropertyName=${btoa(JSON.stringify(value))}` // Using a template literal with an expression</div><div class="c-code__line">document.cookie=&quot;51D_PropertyName=&quot;+profileIds.join(&quot;|&quot;) // Assigning a value using a joined string of variables</div><div class="c-code__line">document.cookie = `51D_PropertyName=${&quot;True&quot;}`; // Using backticks for programmatic value assignment</div></div><p>#### Invalid Examples: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">document.cookie = &quot;51D_PropertyName=True&quot;; // Direct assignment within the string is not allowed</div><div class="c-code__line">document.cookie = &quot;51D_PropertyName=&quot; + profileIds.join(&quot; &quot;) // Spaces within the expression are not allowed</div><div class="c-code__line">document.cookie = &quot;  51D_PropertyName  = &quot; + &quot;True&quot;; // Spaces inside the cookie name are not allowed</div><div class="c-code__line">document.cookie = `  51D_PropertyName  =${&quot;True&quot;}`; // Spaces inside the template literal are not allowed</div><div class="c-code__line">document.cookie = `51D_PropertyName=START${window.middle}END`; // Concatenating strings directly within template literals is not allowed</div></div><hr/>
<h2>Shipping / Deployment</h2>
<p>This repo is not a stand-alone package, but is shipped as part of and used by each of the following repositories / packages:</p><ul>
<li><a href="https://github.com/51Degrees/pipeline-dotnet">pipeline-dotnet</a> as a submodule</li>
<li><a href="https://github.com/51Degrees/pipeline-java">pipeline-java</a> as a submodule</li>
<li><a href="https://github.com/51Degrees/pipeline-node">pipeline-node</a> as a submodule</li>
<li><a href="https://github.com/51Degrees/pipeline-python">pipeline-python</a> as a submodule</li>
<li><a href="https://github.com/51Degrees/pipeline-php-core">pipeline-php-core</a> as a static dependency</li>
</ul>
<p>Wherever it is a submodule it will be updated by <code>Nightly Submodule Update</code> action, wherever it is a static dependency it will be updated by the <code>Nightly Package Update</code> action within a target repository.</p>
<p>No special action is needed from the user to deploy the template, just be aware that any changes introduced in this repo will automatically propagate and affect the above packages. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
